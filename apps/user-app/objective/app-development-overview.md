# Flutter Dashboard 중심 User-App 개발 개요

## 📱 **서비스 개요**

### **앱 유형**
- **플랫폼**: Flutter Web App (개발 효율성 및 범용성 확보)
- **대상**: 관리자/보호자/돌봄 제공자
- **목적**: 실시간 모니터링, 생활 요약, 안심 메시지, 원격 제어

### **핵심 가치**
- **실시간 모니터링**: 돌봄 대상자의 생활 상태 실시간 추적
- **집계성 분석**: 돌봄 대상자 전체 및 개인별 분석 제공
- **위기 상황 감지**: 스마트 홈 IoT 센서 데이터 기반 위기 상황 조기 경보
- **생활 패턴 분석**: 6개월간의 초단위 센싱 데이터 기반 패턴 분석

## 🎯 **주요 기능**

### **1. 인증 기능**
- **사용자 테이블**: `users` (user_id, user_role, user_name, email, phone_number)
- **관계 테이블**: `user_relationships` (돌봄, 가족, 관리 관계 정의)
- **프로필 테이블**: `user_profiles` (상세 정보, 병력, 특이사항)
- **인증 방식**: 간단한 로그인 기능
- **권한 관리**: 관계가 확인된 사용자만 돌봄 대상자 데이터 접근

### **2. 대시보드 (핵심 기능)**
- **데이터 소스**: `home_state_snapshots` 테이블 (6개월간 초단위 IoT 센싱 데이터)
- **데이터 특성**: 거의 1초 단위로 업데이트되는 스마트 홈 디바이스 센싱 데이터
- **주요 목적**: 위기 상황 감지, 생활 패턴 분석

#### **2-1. 돌봄 대상자 개인 대시보드**
- **대상**: 보호자, 돌봄 제공자
- **기능**: 개인의 home_state_snapshots 데이터 실시간 표시
- **내용**: 센서 상태, 위기 상황, 생활 패턴, 상태 해석

#### **2-2. 돌봄 대상자 전체 집계 데이터 대시보드**
- **대상**: 관리자
- **기능**: 돌봄 대상자 전체 목록 및 상태 모니터링
- **특징**: 위기 상황별 우선순위 정렬, 집계성 데이터 중심

### **3. 스케줄 관리**
- **복약 일정**: 돌봄 대상자의 복약 관리
- **병원 진료 일정**: 병원 방문 일정 관리
- **방문 일정**: 돌봄 제공자/담당자 방문 일정 관리

## 🚀 **개발 우선순위**

### **1순위: 대시보드 (핵심 기능)**
#### **1-1. 돌봄 대상자 개인 대시보드**
- **우선도**: 최고
- **설명**: 돌봄 대상자 개인의 데이터를 보여주는 대시보드
- **데이터**: home_state_snapshots 테이블의 1초 단위 IoT 센싱 데이터
- **기능**: 데이터 표시, 상태 해석, 실시간 업데이트

#### **1-2. 돌봄 대상자 전체 집계 데이터 대시보드**
- **우선도**: 최고
- **설명**: 돌봄 대상자 전체의 데이터를 보여주는 대시보드
- **기능**: 대상자 목록, 상태 모니터링, 위기 상황 우선순위 정렬
- **특징**: 집계성 데이터 중심, 개인 대시보드 연결

### **2순위: 스케줄 관리 기능**
- **복약 일정 관리**
- **병원 방문 일정 관리**
- **담당자/돌봄 제공자 방문 일정 관리**

### **3순위: 로그인 기능**
- **돌봄 대상자, 담당자 중심 인증**
- **가족과 돌봄 제공자 관계 확인**
- **권한 기반 데이터 접근 제어**

## 🏗️ **기술 아키텍처**

### **프론트엔드**
- **프레임워크**: Flutter Web
- **상태 관리**: Provider/Riverpod
- **HTTP 클라이언트**: Dio
- **차트 라이브러리**: Flutter Charts
- **UI 컴포넌트**: Material Design 3

### **백엔드 연동**
- **API**: RESTful API (기존 WAS Server)
- **인증**: JWT Token
- **실시간 데이터**: WebSocket 또는 Server-Sent Events
- **데이터 캐싱**: Local Storage + Memory Cache

### **데이터 구조**
- **사용자 정보**: users, user_relationships, user_profiles
- **센서 데이터**: home_state_snapshots (실시간 IoT 데이터)
- **스케줄**: 별도 스케줄 테이블 필요

## 📊 **데이터 흐름**

### **1. 인증 플로우**
```
로그인 → 사용자 정보 조회 → 관계 정보 확인 → 권한 설정
```

### **2. 대시보드 데이터 플로우**
```
IoT 센서 → home_state_snapshots → API → Flutter App → 대시보드 표시
```

### **3. 실시간 업데이트**
```
센서 데이터 변경 → 데이터베이스 업데이트 → API 알림 → 앱 상태 업데이트
```

## 🎨 **UI/UX 설계 원칙**

### **1. 대시보드 중심 설계**
- **메인 화면**: 대시보드가 앱의 중심
- **직관적 네비게이션**: 최소한의 클릭으로 원하는 정보 접근
- **반응형 디자인**: 다양한 화면 크기 지원

### **2. 위기 상황 우선 표시**
- **시각적 강조**: 위기 상황을 명확하게 구분
- **우선순위 표시**: 심각도에 따른 색상 및 아이콘 사용
- **빠른 대응**: 위기 상황 발생 시 즉시 알림

### **3. 데이터 시각화**
- **차트 및 그래프**: 센서 데이터의 시간별 변화 표시
- **상태 표시**: 직관적인 아이콘과 색상으로 상태 표현
- **집계 정보**: 전체 대상자 현황을 한눈에 파악 가능

## 🔒 **보안 및 권한**

### **1. 인증 및 권한**
- **사용자 역할**: admin, caregiver, care_target, family
- **관계 기반 접근**: user_relationships 테이블 기반 권한 제어
- **데이터 격리**: 돌봄 대상자별 데이터 접근 제한

### **2. 데이터 보호**
- **개인정보 보호**: 민감한 정보 암호화 및 접근 제한
- **API 보안**: HTTPS, JWT 토큰, API 키 관리
- **로깅**: 사용자 활동 로그 기록

## 📈 **성능 최적화**

### **1. 데이터 로딩**
- **페이지네이션**: 대량 데이터의 효율적 로딩
- **캐싱**: 자주 사용되는 데이터 메모리 캐싱
- **지연 로딩**: 필요시에만 데이터 로딩

### **2. 실시간 업데이트**
- **폴링 최적화**: 적절한 주기로 데이터 업데이트
- **WebSocket**: 실시간 데이터 전송
- **배치 처리**: 여러 데이터를 묶어서 처리

## 🧪 **테스트 전략**

### **1. 단위 테스트**
- **위젯 테스트**: UI 컴포넌트 개별 테스트
- **비즈니스 로직 테스트**: 도메인 로직 테스트
- **API 연동 테스트**: 백엔드 연동 테스트

### **2. 통합 테스트**
- **화면 플로우 테스트**: 사용자 시나리오 기반 테스트
- **데이터 동기화 테스트**: 실시간 데이터 업데이트 테스트
- **권한 테스트**: 사용자 역할별 접근 권한 테스트

## 📋 **개발 체크리스트**

### **Phase 1: 프로젝트 설정 및 기본 구조**
- [ ] Flutter Web 프로젝트 생성
- [ ] 프로젝트 구조 설정 (폴더 구조, 네이밍 컨벤션)
- [ ] 기본 의존성 설정 (Provider, Dio, Charts 등)
- [ ] 라우팅 설정
- [ ] 테마 및 기본 UI 컴포넌트 설정

### **Phase 2: 인증 시스템**
- [ ] 로그인 화면 UI 구현
- [ ] 사용자 인증 로직 구현
- [ ] 권한 관리 시스템 구현
- [ ] 사용자 정보 및 관계 정보 조회 API 연동
- [ ] 로그인 상태 관리

### **Phase 3: 개인 대시보드 (1순위)**
- [ ] 대시보드 레이아웃 설계
- [ ] 센서 데이터 표시 컴포넌트 구현
- [ ] 실시간 데이터 업데이트 구현
- [ ] 상태 해석 및 표시 로직 구현
- [ ] 차트 및 그래프 컴포넌트 구현

### **Phase 4: 전체 집계 대시보드 (1순위)**
- [ ] 전체 대상자 목록 화면 구현
- [ ] 위기 상황 우선순위 정렬 로직 구현
- [ ] 집계 데이터 표시 컴포넌트 구현
- [ ] 개인 대시보드 연결 네비게이션 구현
- [ ] 실시간 상태 업데이트 구현

### **Phase 5: 스케줄 관리 (2순위)**
- [ ] 스케줄 화면 UI 구현
- [ ] 일정 CRUD 기능 구현
- [ ] 캘린더 뷰 구현
- [ ] 알림 기능 구현

### **Phase 6: 통합 및 최적화**
- [ ] 전체 앱 통합 테스트
- [ ] 성능 최적화
- [ ] 에러 처리 및 로깅
- [ ] 사용자 피드백 반영
- [ ] 배포 준비

## 🎯 **성공 지표**

### **1. 기능적 지표**
- [ ] 모든 대시보드 기능 정상 동작
- [ ] 실시간 데이터 업데이트 지연 시간 < 5초
- [ ] 사용자 인증 및 권한 관리 정상 동작
- [ ] 스케줄 관리 기능 완성도 100%

### **2. 성능 지표**
- [ ] 앱 로딩 시간 < 3초
- [ ] 데이터 렌더링 시간 < 1초
- [ ] 메모리 사용량 최적화
- [ ] 네트워크 요청 최적화

### **3. 사용자 경험 지표**
- [ ] 직관적인 UI/UX
- [ ] 위기 상황 명확한 표시
- [ ] 빠른 정보 접근성
- [ ] 반응형 디자인 완성도

---

**문서 버전**: 1.0  
**작성일**: 2025-08-23  
**작성자**: AI Assistant  
**프로젝트**: Flutter Dashboard 중심 User-App
