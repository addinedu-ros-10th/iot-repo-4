# IoT Care Backend System μ»¨ν…μ¤νΈ λ³µμ› ν”„λ΅¬ν”„νΈ

## π― ν”„λ΅μ νΈ κ°μ”

**ν”„λ΅μ νΈλ…**: IoT Care Integrated Care Service Backend System  
**κµ¬μ΅°**: Monorepo λ‚΄ `services/was-server`  
**μ•„ν‚¤ν…μ²**: Clean Architecture + FastAPI + Docker Compose  
**λ°μ΄ν„°λ² μ΄μ¤**: PostgreSQL (μ™Έλ¶€ μ„λ²„) + Redis (Docker)  
**μ›Ήμ„λ²„**: Caddy (SSL + λ¦¬λ²„μ¤ ν”„λ΅μ‹)

## π“ ν„μ¬ κ°λ° ν„ν™©

### **μ „μ²΄ μ§„ν–‰λ¥ : 95% β…**
- **API κµ¬ν„**: 25/25 μ™„λ£ (100%)
- **Clean Architecture**: 100% μ¤€μ
- **μμ΅΄μ„± μ£Όμ…**: 100% μ μ©
- **μ‹μ¤ν… ν†µν•©**: 0% (Import μ¤λ¥λ΅ μΈν• μ§€μ—°) π”΄

### **κµ¬ν„ μ™„λ£λ API (25/25)**
- **User API**: 1/1 μ™„λ£ β…
- **μ„Όμ„ API**: 17/17 μ™„λ£ β…
- **Actuator API**: 4/4 μ™„λ£ β…

## π¨ **ν„μ¬ μ°¨λ‹¨ μ΄μ (Issue #4)**

### **ImportError - Edge μ„Όμ„ μΈν„°νμ΄μ¤ import μ‹¤ν¨**
- **μƒνƒ**: π”΄ μ‹μ¤ν… μ‹μ‘ λ¶κ°€
- **μ¤λ¥ λ©”μ‹μ§€**: 
  ```
  ImportError: cannot import name 'IEdgeFlameRepository' from 'app.interfaces.repositories.sensor_repository'
  ```
- **μ›μΈ**: `container.py`μ—μ„ μ΅΄μ¬ν•μ§€ μ•λ” μΈν„°νμ΄μ¤λ“¤μ„ importν•λ ¤κ³  μ‹λ„
- **μν–¥**: μ „μ²΄ μ‹μ¤ν… ν†µν•© ν…μ¤νΈ μ§€μ—°

### **ν•΄κ²° κ³„ν (μ§„ν–‰ μ¤‘)**
1. **Phase 1**: μΈν„°νμ΄μ¤ νμΌ κµ¬μ΅° μ •λ¦¬ (30λ¶„)
2. **Phase 2**: import λ¬Έ μμ • (30λ¶„)
3. **Phase 3**: μ‹μ¤ν… μ¬μ‹μ‘ ν…μ¤νΈ (15λ¶„)
4. **μ΄ μμƒ μ‹κ°„**: 1μ‹κ°„ 15λ¶„

## π—οΈ ν”„λ΅μ νΈ κµ¬μ΅°

### **Clean Architecture λ μ΄μ–΄**
```
app/
β”β”€β”€ domain/           # μ—”ν‹°ν‹° λ¨λΈ
β”β”€β”€ use_cases/        # λΉ„μ¦λ‹μ¤ λ΅μ§
β”β”€β”€ interfaces/       # Repository/Service μΈν„°νμ΄μ¤
β”β”€β”€ infrastructure/   # Repository κµ¬ν„μ²΄
β”β”€β”€ api/             # FastAPI μ—”λ“ν¬μΈνΈ
β””β”€β”€ core/            # μμ΅΄μ„± μ£Όμ… μ»¨ν…μ΄λ„
```

### **μ£Όμ” νμΌλ“¤**
- `app/core/container.py` - μμ΅΄μ„± μ£Όμ… μ»¨ν…μ΄λ„ (ν„μ¬ Import μ¤λ¥ λ°μƒ)
- `app/infrastructure/database.py` - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° κ΄€λ¦¬
- `app/api/v1/` - λ¨λ“  API μ—”λ“ν¬μΈνΈ
- `docker-compose.yml` - μ»¨ν…μ΄λ„ μ¤μΌ€μ¤νΈλ μ΄μ…

## π”§ κΈ°μ  μ¤νƒ

### **λ°±μ—”λ“**
- **FastAPI**: λΉ„λ™κΈ° μ›Ή ν”„λ μ„μ›ν¬
- **SQLAlchemy**: ORM λ° λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ¦¬
- **Alembic**: λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ…
- **Pydantic**: λ°μ΄ν„° κ²€μ¦ λ° μ§λ ¬ν™”

### **μΈν”„λΌ**
- **Docker**: μ• ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ΄λ„ν™”
- **Docker Compose**: λ‹¤μ¤‘ μ»¨ν…μ΄λ„ κ΄€λ¦¬
- **Caddy**: μ›Ήμ„λ²„ λ° λ¦¬λ²„μ¤ ν”„λ΅μ‹
- **PostgreSQL**: λ©”μΈ λ°μ΄ν„°λ² μ΄μ¤ (μ™Έλ¶€ μ„λ²„)
- **Redis**: μΊμ‹± λ° μ„Έμ… κ΄€λ¦¬

## π“‹ ν„μ¬ μ‘μ—… μƒνƒ

### **μ™„λ£λ μ‘μ—…**
- β… 25κ° ν…μ΄λΈ” API λ¨λ‘ κµ¬ν„ μ™„λ£
- β… Clean Architecture 100% μ¤€μ
- β… μμ΅΄μ„± μ£Όμ… λ° μ—­μ „ μ›μΉ™ μ μ©
- β… λ¨λ“  λΉ„μ¦λ‹μ¤ λ΅μ§ κ²€μ¦ λ° ν†µκ³„ κΈ°λ¥ κµ¬ν„
- β… Pydantic μ¤ν‚¤λ§ λ° λ°μ΄ν„° κ²€μ¦
- β… Docker Compose ν™κ²½ κµ¬μ¶•

### **μ§„ν–‰ μ¤‘μΈ μ‘μ—…**
- π”„ Import μ¤λ¥ ν•΄κ²° (Issue #4)
- π”„ μ‹μ¤ν… ν†µν•© ν…μ¤νΈ μ¤€λΉ„

### **λ€κΈ° μ¤‘μΈ μ‘μ—…**
- π“‹ Phase 5: κ³ κΈ‰ κΈ°λ¥ κµ¬ν„ (μΈμ¦, μ‹¤μ‹κ°„ μ•λ¦Ό λ“±)
- π“‹ Phase 6: ν”„λ΅λ•μ… ν™κ²½ μ¤€λΉ„

## π€ λ‹¤μ λ‹¨κ³„ κ³„ν

### **μ¦‰μ‹ (1μ‹κ°„ 15λ¶„ λ‚΄)**
1. Import μ¤λ¥ ν•΄κ²°
2. μ‹μ¤ν… ν†µν•© ν…μ¤νΈ μ§„ν–‰
3. API μ„λ²„ μ •μƒ λ™μ‘ ν™•μΈ

### **λ‹¨κΈ° (1-2μ£Ό)**
1. Phase 5 μ‹μ‘: μΈμ¦/μΈκ°€ μ‹μ¤ν… κµ¬ν„
2. μ‹¤μ‹κ°„ μ•λ¦Ό: WebSocket κΈ°λ° μ‹¤μ‹κ°„ ν†µμ‹ 
3. λ°μ΄ν„° μ‹κ°ν™”: κΈ°λ³Έ μ°¨νΈ λ° λ€μ‹λ³΄λ“ API

### **μ¤‘κΈ° (1-2κ°μ›”)**
1. ν”„λ΅λ•μ… ν™κ²½ μ¤€λΉ„
2. CI/CD νμ΄ν”„λΌμΈ κµ¬μ¶•
3. μ„±λ¥ ν…μ¤νΈ λ° μµμ ν™”

## π“ κ΄€λ ¨ λ¬Έμ„

### **κ°λ° λ¬Έμ„**
- `task/work-log.md` - κ°λ° μ‘μ—… λ΅κ·Έ
- `task/checklist.md` - κ°λ° μ²΄ν¬λ¦¬μ¤νΈ
- `task/requirements-summary.md` - μ”κµ¬μ‚¬ν•­ μ”μ•½ λ° ν„ν™©
- `task/development-guidelines.md` - κ°λ° μ§€μΉ¨
- `task/issues-and-solutions.md` - μ΄μ λ° ν•΄κ²° λ°©μ•

### **API λ¬Έμ„**
- `docs/manual-integration-test-guide.md` - μλ™ ν†µν•© ν…μ¤νΈ κ°€μ΄λ“
- Swagger UI: http://localhost:8080/docs (μ‹μ¤ν… μ‹μ‘ ν›„ μ ‘κ·Ό κ°€λ¥)

## π” λ¬Έμ  ν•΄κ²°μ„ μ„ν• μ»¨ν…μ¤νΈ

### **ν„μ¬ λ°μƒν• Import μ¤λ¥μ ν•µμ‹¬**
1. **`container.py`**μ—μ„ **`sensor_repository`**μ—μ„ Edge μ„Όμ„ μΈν„°νμ΄μ¤λ¥Ό importν•λ ¤κ³  μ‹λ„
2. **μ‹¤μ λ΅λ”** κ° μ„Όμ„λ³„λ΅ κ°λ³„ μΈν„°νμ΄μ¤ νμΌμ΄ μƒμ„±λμ–΄μ•Ό ν•¨
3. **`sensor_repository.py`**μ— Edge μ„Όμ„ μΈν„°νμ΄μ¤κ°€ μ •μλμ–΄ μμ§€ μ•μ

### **ν•΄κ²°ν•΄μ•Ό ν•  ν•µμ‹¬ λ¬Έμ **
1. μΈν„°νμ΄μ¤ νμΌ κµ¬μ΅° μ •λ¦¬
2. `container.py`μ import λ¬Έ μμ •
3. μμ΅΄μ„± μ£Όμ… μ‹μ¤ν…μ μ¬λ°”λ¥Έ μ—°κ²° ν™•μΈ

## π’΅ μ»¨ν…μ¤νΈ λ³µμ›μ„ μ„ν• ν•µμ‹¬ μ •λ³΄

### **ν”„λ΅μ νΈ μƒνƒ**
- **API κµ¬ν„**: 100% μ™„λ£
- **μ‹μ¤ν… ν†µν•©**: Import μ¤λ¥λ΅ μΈν• μ§€μ—°
- **μ „μ²΄ μ§„ν–‰λ¥ **: 95% (μ΄μ ν•΄κ²° ν›„ 100% λ‹¬μ„± μμ •)

### **ν„μ¬ μ°μ„ μμ„**
1. **Import μ¤λ¥ ν•΄κ²°** (μ‹μ¤ν… μ‹μ‘ κ°€λ¥ν•κ² λ§λ“¤κΈ°)
2. **μ‹μ¤ν… ν†µν•© ν…μ¤νΈ** (25κ° API λ¨λ‘ μ •μƒ λ™μ‘ ν™•μΈ)
3. **Phase 5 μ‹μ‘** (κ³ κΈ‰ κΈ°λ¥ κµ¬ν„)

### **μ„±κ³µ κΈ°μ¤€**
- μ‹μ¤ν… μ •μƒ μ‹μ‘
- λ¨λ“  25κ° API μ—”λ“ν¬μΈνΈ μ •μƒ λ™μ‘
- Swagger UIμ—μ„ API λ¬Έμ„ μ •μƒ ν‘μ‹
- λ°μ΄ν„°λ² μ΄μ¤ CRUD μ‘μ—… μ •μƒ μν–‰

---

## π“ μ§€μ› λ° λ¬Έμ

μ΄ μ»¨ν…μ¤νΈ λ³µμ› ν”„λ΅¬ν”„νΈλ΅λ„ μ¶©λ¶„ν• μ •λ³΄λ¥Ό μ–»μ„ μ μ—†λ” κ²½μ°:
1. `task/` ν΄λ”μ λ¬Έμ„λ“¤ μ°Έμ΅°
2. `issues-and-solutions.md`μ—μ„ ν„μ¬ μ΄μ μƒμ„Έ ν™•μΈ
3. κ°λ°ν€μ— μ¶”κ°€ μ»¨ν…μ¤νΈ μ”μ²­

**ν„μ¬ Issue #4 ν•΄κ²° μ§„ν–‰ μ¤‘μ΄λ©°, μ™„λ£ ν›„ μ‹μ¤ν… ν†µν•© ν…μ¤νΈλ¥Ό μ§„ν–‰ν•  μμ •μ…λ‹λ‹¤.**
